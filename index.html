<!DOCTYPE html>
<html>
<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
  <link rel="stylesheet" type="text/css" href="Twettler.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/font-awesome.css">
  <link rel="stylesheet" type="text/css" href="css/animate.css">
</head>

<div class="container-fluid">
  <body class="text-center">
    <script>

      /*---------- beginning of the jQuery code ------*/
      $(document).ready(function(){
        var $body = $('body');
        $body.css({'color': 'red', 'background-color': '#E6E6FA'})
        $body.addClass('animated slideInDown')

        /*--------- title ----------*/

        $body.html('WELCOME TO TWEETLER!!');


        /*-------- main tweet body -----------*/
        //create a main body to store all the tweets
          var $tweetBody = $('<div></div>')


        /*-------- tweets generator --------*/

        //index = stream.home of tweets array
        var index = streams.home.length - 1;


        //travers through the array of tweets in stream.home
        while(index >= 0){
          //tweet = array of random tweets form stream.home array
          var tweet = streams.home[index];
          //$tweet creates a new div in html
          var $tweet = $('<div class="random-tweets"></div>');
          //inside of the $tweet div, each text is a display of one user tweet message (message and user come from data_generator), adding a total of 10 tweets in the $tweet div.
          $tweet.text('@' + tweet.user + ': ' + tweet.message + "\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0" + " Posted on " + tweet.created_at.getFullYear() + "-" + tweet.created_at.getMonth() + "-" + tweet.created_at.getDate() + " " + tweet.created_at.getHours() + ":" + tweet.created_at.getMinutes() + ":" + tweet.created_at.getSeconds());

          //add each $tweet div to the end of the tweet main body
          $tweet.appendTo($tweetBody);
          index -= 1;
        }

          //attatch the main tweet body to the html body
          $tweetBody.appendTo($body)

        /*---------- refresh all tweets button--------*/

        //var $refreshbutton = $('<div></div>')
        //$refreshbutton.appendTo($body)
        var $button = $('<button class="btn btn-success btn-sm refresh-tweets animated bounceInDown"><i class="fa fa-twitter"></i>\xa0\xa0\xa0Get New Tweets</button>')
        //attatch button below $tweetBody
        $button.appendTo($tweetBody);

        /*----------- refresh all tweets button function handler -------*/

        $button.on("click", function() {
          $('.random-tweets').hide();
          $('.random-tweets').remove();
          var newTweets = function(){while(index >= 0){
          //tweet = array of random tweets form stream.home array
          var tweet = streams.home[index];
          //$tweet creates a new div in html
          var $tweet = $('<div class="random-tweets"></div>');
          //inside of the $tweet div, each text is a display of one user tweet message (message and user come from data_generator), adding a total of 10 tweets in the $tweet div.
          $tweet.text('@' + tweet.user + ': ' + tweet.message + "\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0" + " Posted on " + tweet.created_at.getFullYear() + "-" + tweet.created_at.getMonth() + "-" + tweet.created_at.getDate() + " " + tweet.created_at.getHours() + ":" + tweet.created_at.getMinutes() + ":" + tweet.created_at.getSeconds());

          //add each $tweet div to the end of the tweet main body
          $tweet.appendTo($tweetBody);
          index -= 1;
        }
      }
      console.log(newTweets())
          //$tweetBody.replaceWith($tweetBody)
          //location.load(location.href + "maintweet");
          //freshTweets();
          $('newTweets').fadeIn('slow');
         //location.reload();
        });



        /*----------- user tweets body ---------*/
        var $usertweet = $('<div></div>')
        $usertweet.appendTo($body);


        /*----------- button for creating user's tweet function-------------*/

          var createTweet = function(user) {
            var userObj = streams.users[user];
            var index = userObj.length - 1;

            while(index >= 0) {

              var $eachUserTweet = $('<div class="user-Tweets"></div>')
              $eachUserTweet.text("@" + userObj[index].user + ': ' + userObj[index].message + "\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0" + " Posted on " + userObj[index].created_at.getFullYear() + "-" + userObj[index].created_at.getMonth() + "-" + userObj[index].created_at.getDate() + " " + userObj[index].created_at.getHours() + ":" + userObj[index].created_at.getMinutes() + ":" + userObj[index].created_at.getSeconds());

              $eachUserTweet.appendTo($usertweet)
              index -=1
            }
          }

        /*------------ each user's button ------------------*/

        var $shawndrost = $('<button class="btn btn btn-primary btn-sm col-sm-3 user-button animated swing" id="shawndrost"><i class="fa fa-user" aria-hidden="true"></i>\xa0\xa0\xa0See Shawndrost\'s Tweet</button>');
        $shawndrost.appendTo($usertweet);
        //on click function
        $('#shawndrost').on("click", function(){
          createTweet('shawndrost')
        });


        var $sharksforcheap = $('<button class="btn btn-primary btn-sm col-sm-3 user-button animated swing" id="sharksforcheap"><i class="fa fa-user" aria-hidden="true"></i>\xa0\xa0\xa0See Sharksforcheap\'s Tweet</button>');
        $sharksforcheap.appendTo($usertweet);
        //on click function
        $('#sharksforcheap').on("click", function(){
          createTweet('sharksforcheap')
        });

        var $mracus = $('<button class="btn btn-primary btn-sm col-sm-3 user-button animated swing" id="mracus"><i class="fa fa-user" aria-hidden="true"></i>\xa0\xa0\xa0See Mracus\'s Tweet</button>');
        $mracus.appendTo($usertweet);
        //on click function
        $('#mracus').on("click", function(){
          createTweet('mracus')
        });

        var $douglascalhoun = $('<button class="btn btn-primary col-sm-3 btn-sm user-button animated swing" id="douglascalhoun"><i class="fa fa-user" aria-hidden="true"></i>\xa0\xa0\xa0See Douglascalhoun\'s Tweet </button>');
        $douglascalhoun.appendTo($usertweet);
        //on click function
        $('#douglascalhoun').on("click", function(){
          createTweet('douglascalhoun')
        });

        /*-------------------- back to top button-------------*/
        var $backToTop = $('<a href="#" class="back-to-top" style="display: inline;"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i><u>Back to top</u></a>')
        $backToTop.appendTo($body)

        /*----- set back to top button fade in and out ---------*/

        //set screen offset on screen for when the button will face in
        var offset = 250;
        //set the up to top fade in duration
        var fadeInDuration = 1000;

        //set the on scroll function on the main Window
        $(window).scroll(function(){
          //have an if statement to set the current position of the screen and
          //compare with the offset number
          if($(this).scrollTop() > offset) {
            //if scroll off the threshold, fade in button with the set fadeInDuration
            $backToTop.fadeIn(fadeInDuration);
            } else {
              //if within threshold button fade out
              $backToTop.fadeOut('fast')
            }
        });

        /*----------set back to top button functionality-----------*/
        //button on click function
        $backToTop.click(function(event){
          //prevent defult function to happen
          event.preventDefault();
          $('html, body').animate({
            //set animate object key and value
            //use scroll top animation
            scrollTop: 0
            },
            //set the scroll up time in millisecond
            1000);
          //return value with false with out evaluating callback
          return false
        });


      });

    </script>
  </body>
</div>
</html>
